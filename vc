<style>

.speech{

}

.speech-button{
	display:none;
}
  
.animate-flicker{

}



@@keyframes flickerAnimation {
  0%   { opacity:1; }
  50%  { opacity:0; }
  100% { opacity:1; }
}
@@-o-keyframes flickerAnimation{
  0%   { opacity:1; }
  50%  { opacity:0; }
  100% { opacity:1; }
}
@@-moz-keyframes flickerAnimation{
  0%   { opacity:1; }
  50%  { opacity:0; }
  100% { opacity:1; }
}
@@-webkit-keyframes flickerAnimation{
  0%   { opacity:1; }
  50%  { opacity:0; }
  100% { opacity:1; }
}
.animate-flicker {
   -webkit-animation: flickerAnimation 1s infinite;
   -moz-animation: flickerAnimation 1s infinite;
   -o-animation: flickerAnimation 1s infinite;
    animation: flickerAnimation 1s infinite;
}  
  </style>

  

<div class="container-page box-image mh-100vh  bg-gradient-1-left mo-bg-opacity-1-5">
  <div class="bg-image-full bg-image-cover  mo-bg-image-contain desktop-view ipad-view" data-enllax-direction="" data-enllax-ratio=".3" data-enllax-type="" style="background-image: url(&quot;//cdn.emiratesnbd.com/en/assets/images/prb_wm_mainPage_banner.jpg&quot;); position: absolute; left: 0px; right: 0px; background-position: center -37px;    transform:scaleX(-1)">&nbsp;</div>
  <div class="pure-g site">
    <div class="pure-u-1">
      <div class="pure-g"> 
        
        <div class="pure-u-1 pure-u-xl-16-24 pure-u-lg-16-24 pure-u-md-16-24 pure-u-sm-24-24">
          <div class="column-text tc-color-2">
            <p class="dekstop-view ipad-view">&nbsp;</p>
            <p class="dekstop-view ipad-view">&nbsp;</p>
            
              <span class="fs-l mo-fs-m">Wealth Management</span><br>
              <h1 class="m-0 lh-40 tc-white"><strong class="xlarge">Managing Your Financial Future</strong></h1>
              <p>&nbsp;</p>
              <h2 class="m-0 lh-25 tc-white pr-5"><small>We are one of the region's largest financial institutions, bringing you peace of mind and access to a range of proven resources and global investment products.</small></h2>
              <h2 class="m-0 lh-25 tc-white pr-5 mt-10"><small>But that is not all. We also work hard to get to know you as our valued client, so we can give you advice that meets your unique needs and time horizons.</small></h2>
              <h2 class="m-0 lh-25 tc-white pr-5 mt-10"><small>Our wealth advisors are trained and equipped to provide you with best-of-class investment and financial planning solutions, while following our robust in-house approach.</small></h2>
              <h2 class="m-0 lh-25 tc-white pr-5 mt-10"><small>This is how we will help you achieve your future financial goals.</small></h2>
              
            <p class="desktop-view m-0">&nbsp;</p>
            <div class="pure-u-1 pure-u-xl-24-24 pure-u-lg-24-24 pure-u-md-24-24 pure-u-sm-24-24">
              
                <div class="pure-g">
                  <div class="pure-u-1 pure-u-md-7-24 aos-init aos-animate" data-aos="fade-down" data-aos-delay="200">
                    <div class="column-text ta-left">
                      <p class="fs-m tc-white"><img class="pure-img pull-left mr-20 pb-20" src="//cdn.emiratesnbd.com/en/assets/images/psb_wm_understandingYourGoals_icon.png"> Understanding Your Goals and Needs</p>
                    </div>
                  </div>
                  <div class="pure-u-1 pure-u-md-7-24 aos-init aos-animate" data-aos="fade-down" data-aos-delay="300">
                    <div class="column-text ta-left">
                      <p class="fs-m tc-white"><img class="pure-img pull-left mr-20 pb-20" src="//cdn.emiratesnbd.com/en/assets/images/psb_wm_analysisOfRisks_icon.png"> Analysis of Your Risk Appetite</p>
                    </div>
                  </div>
                  <div class="pure-u-1 pure-u-md-9-24 aos-init aos-animate" data-aos="fade-down" data-aos-delay="400">
                    <div class="column-text ta-left">
                      <p class="fs-m tc-white"><img class="pure-img pull-left mr-20 pb-20" src="//cdn.emiratesnbd.com/en/assets/images/psb_wm_recommendingPortfolio_icon.png">Recommending a Suitable Portfolio of Investments</p>
                    </div>
                  </div>
                  <div class="pure-u-1 pure-u-md-10-24 aos-init aos-animate" data-aos="fade-down" data-aos-delay="500">
                    <div class="column-text ta-left">
                      <p class="fs-m tc-white"><img class="pure-img pull-left mr-20 mo-mb-10 pb-20" src="//cdn.emiratesnbd.com/en/assets/images/psb_wm_monitoringInvestment_icon.png"> Monitoring Investment Performance and Advice on Rebalancing Your Portfolio</p>
                    </div>
                  </div>
                </div>
                
            </div>
          </div>
        </div>
        
        <div class="pure-u-1 pure-u-xl-8-24 pure-u-lg-8-24 pure-u-md-8-24 pure-u-sm-24-24">
          <div class="column-text">
            
                <div class="application-form grey 1column p-10 mh-510" id="form-scroll">	
				
                  <form class="pure-form pure-form-stacked" method="post" id="haveuscallyou-form" name="haveuscallyou-form">
                    <div class="campaign-form" id="showform">
					<div id="icon-mic" class=""></div>	                      
                        <h3 class="tc-blue ta-center"><strong>Apply now and have us call you</strong></h3>
                        
                        <div class="pure-form-input-group first mbt-10 box-white">
                          <label for="name"><strong>
                            
                              Assurance Type *
                              
                            </strong></label>
                          <select name="subproduct" class="w-100 speech" data-scrollto-offset="-90" style="background: url(/eref/images/bg_select.png) right center no-repeat;" speech-key="assurance" speech-question="Please Select Assurance Type" speech-type="select" speech-format="string"  >
                            <option value="">
                            
                              -Select-
                              
                            </option>
                            <option value="Grow your wealth">
                            
                              Grow Your Wealth
                            
                            </option>
                            <option value="Plan for the future">
                            
                              Plan for the Future
                            
                            </option>
                          </select>
                        </div>
                        
                      <div class="pure-form-input-group first mbt-10 box-white">
                        <label for="name"><strong>
                          
                            NAME *
                            
                          </strong></label>
                        <input id="laName" name="laName" autocomplete="off" class="pure-u-23-24 restrictCopy textinput f1 speech" speech-key="name" speech-question="Please enter your Name" speech-type="text" speech-format="string"  type="text" value="" placeholder="Please enter your Name" onkeypress="return isSpeKey(event)" data-scrollto-offset="-90">
                        
                          <span id="errorsName" class="error"></span>
                        
                      </div>
                      <div class="pure-form-input-group first mbt-10 box-white">
                        <label for="email"><strong id="auto-apply">
                          
                            EMAIL *
                            
                          </strong></label>
                        <input id="laEmail" name="laEmail" autocomplete="off" value="" class="pure-u-23-24 restrictCopy emailtextinput f1 speech" type="email" placeholder="Please enter your email address" data-scrollto-offset="-90"   speech-key="email" speech-question="Please enter your email address" speech-type="email" speech-format="string" >
                        
                          <span id="errorslaEmail" class="error"></span>
                        
                      </div>
                      <div class="pure-form-input-group first mbt-10 box-white">
                        <label for="mobile"><strong>
                          
                            MOBILE *
                            
                          </strong></label>
                        <input id="laMobile" name="laMobile" autocomplete="off" class="pure-u-23-24 restrictCopy f1 speech" type="number" value="" maxlength="10" placeholder="Your mobile phone (0501112233)" onkeypress="return isNumberKey(event)" data-scrollto-offset="-90" pattern="[0-9]*" inputmode="numeric" min="0"     speech-key="mobile" speech-question="Please enter your mobile phone" speech-type="text" speech-format="number">
                        
                          <span id="errorslaMobile" class="error"></span>
                        
                      </div>
                      <div class="pure-form-input-group first mbt-10 box-white">
                        <label for="name"><strong>
                          
                            MONTHLY INCOME (AED)*
                            
                          </strong></label>
                        <input class="pure-u-23-24 validate speech" name="laIncome" maxlength="15" type="text" placeholder="AED" value="" onkeypress="return isNumberKey(event)" inputmode="numeric"      speech-key="income" speech-question="Please enter your monthly income" speech-type="text" speech-format="number">
                        
                          <span id="errorslaIncome" class="error"></span>
                        
                      </div>
                      <div class="pure-form-input-group first mbt-10 box-white">
                        <label for="emirate"><strong>
                          
                            EMIRATE
                            
                          </strong> </label>
                        <select name="laEmirate" class="w-100 speech" data-scrollto-offset="-90" style="background: url(/eref/images/bg_select.png) right center no-repeat;" speech-key="income" speech-question="Please select Emirate" speech-type="select" speech-format="string">
                          <option value="">
                          
                            -Select-
                            
                          </option>
                          <option value="Abu Dhabi">
                          
                            Abu Dhabi
                          
                          </option>
                          <option value="Ajman">
                          
                            Ajman
                          
                          </option>
                          <option value="Dubai">
                          
                            Dubai
                          
                          </option>
                          <option value="Fujairah">
                          
                            Fujairah
                          
                          </option>
                          <option value="Ras Al Khaimah">
                          
                            Ras Al Khaimah
                          
                          </option>
                          <option value="Sharjah">
                          
                            Sharjah
                          
                          </option>
                          <option value="Umm Al Qwain">
                          
                            Umm Al Qwain
                          
                          </option>
                        </select>
                        
                          <span id="errorslaEmirate" class="error"></span>
                        
                      </div>
                      <div class="pure-form-input-group first mbt-10 box-white">
                        <label for="emirate"><strong>
                          
                            NATIONALITY
                            
                          </strong> </label>
                        <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span><input class="pure-input-1 validate laNational ui-autocomplete-input speech" name="laNational" type="text" placeholder="United Arab Emirates" value="" autocomplete="off"  speech-key="NATIONALITY" speech-question="Please enter your nationality" speech-type="text" speech-format="string">
                        
                          <span id="errorslaNational" class="error"></span>
                        
                      </div>
                      <div class="pure-u-1">
                        <div class="pure-g pt15 m-5">
                          <div class="pure-u-1">
                            <input style="margin-top:7px;" class="speech" value="Yes" name="subscribe" type="checkbox" checked="checked" speech-key="subscribe" speech-question="Please subscribe to receive special offers" speech-type="checkbox" speech-format="string">
                            
                              <label for="mobile">Subscribe to receive special offers<br>
                                <a href="/en/campaign-form/terms-and-conditions/" target="_blank"><u>Terms &amp; conditions apply</u></a></label>
                              
                          </div>
                        </div>
                      </div>
                      <div class="mbt-10">
                        <div class="g-recaptcha" data-sitekey="6LcKoT0UAAAAAKtAwbK8F0U4jxVy89xQ58EgsNnq"><div style="width: 304px; height: 78px;"><div><iframe src="https://www.google.com/recaptcha/api2/anchor?ar=1&amp;k=6LcKoT0UAAAAAKtAwbK8F0U4jxVy89xQ58EgsNnq&amp;co=aHR0cHM6Ly93d3cuZW1pcmF0ZXNuYmQuY29tOjQ0Mw..&amp;hl=en&amp;v=v1555968629716&amp;size=normal&amp;cb=z8jlh0ileopz" width="304" height="78" role="presentation" name="a-tgo0jzw2jhrn" frameborder="0" scrolling="no" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation allow-modals allow-popups-to-escape-sandbox"></iframe></div><textarea id="g-recaptcha-response" name="g-recaptcha-response" class="g-recaptcha-response" style="width: 250px; height: 40px; border: 1px solid rgb(193, 193, 193); margin: 10px 25px; padding: 0px; resize: none; display: none;"></textarea></div></div>
                        
                          <span id="errorscaptcha" class="error"></span>
                        
                      </div>
                      <div id="btnSubDisp2" name="btnSubDisp">
                        <input type="hidden" name="btnSubmit" value="btnSubmit">
                        
                          <div class="p-20 pb-10 pt-10 mt-10 ta-left tc-color-2 speech" style="cursor: pointer;background-color:#fdb813;" id="btnSubDispBtn"   speech-key="submit" speech-question="Finish Application" speech-type="submit" speech-format="button" ><strong class="fs-m">Finish  Application</strong><br>
                            <span>Your application is one click away</span><span class="fa fa-angle-right fa-2x float-right" style="position:relative; top:-15px;"></span></div>
                          <div class="bg-color-13 p-20 pb-10 pt-10 ta-left tc-color-2" style="display: none;" id="waiting-message"><strong class="fs-m">Please wait</strong><br>
                            <span>We are processing your request</span><span class="fa fa-hourglass-2 fa-2x float-right" style="position:relative; top:-15px;"></span></div>
                          
                      </div>
                    </div>
                  </form>
                </div>
              
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="clear">&nbsp;</div>
</div>




<script>
	
var VoiceSearchDisabled=false;	
var SpeechSynthesis = new SpeechSynthesisUtterance();
var currentIndex = 0;	
var recognizing = false;
var RecognizingMode = false;
var oldIndex = 0;
var final_transcript = '';
var final_transcript_bkp = '';
var fieldIsNotCleared = true;	
var checkbox_Event = "";
var speech_keys = [];
var TextToVoice = function(message) {
	
	console.log("called...");    
	SpeechSynthesis.text = message;
	SpeechSynthesis.volume = 1;
	SpeechSynthesis.rate = 1;
	SpeechSynthesis.pitch = 1;
	window.speechSynthesis.speak(SpeechSynthesis);  
	SpeechSynthesis.onend = function(event) {
	console.log('Utterance has finished being spoken after ' + event.elapsedTime + ' milliseconds.');
	//	speechStart();
  }  
}




var EnbdSpeechEngine = (function (undefined) {
var eventSplitter = /\s+/,
    Events = function () {}

Events.prototype.on = function (events, callback, context) {
    var cache, event, list
    if (!callback) return this
    cache = this.__events || (this.__events = {})
    events = events.split(eventSplitter)

    while (event = events.shift()) {
        list = cache[event] || (cache[event] = [])
        list.push(callback, context)
    }

    return this
}

Events.prototype.off = function (events, callback, context) {
    var cache, event, list, i

    if (!(cache = this.__events)) return this
    if (!(events || callback || context)) {
        delete this.__events
        return this
    }

    events = events ? events.split(eventSplitter) : Object.keys(cache)

    while (event = events.shift()) {
        list = cache[event]
        if (!list) continue

        if (!(callback || context)) {
            delete cache[event]
            continue
        }

        for (i = list.length - 2; i >= 0; i -= 2) {
            if (!(callback && list[i] !== callback ||
                    context && list[i + 1] !== context)) {
                list.splice(i, 2)
            }
        }
    }

    return this
}

Events.prototype.emit = function(events) {
    var cache, event, all, list, i, len, rest = [], args
    if (!(cache = this.__events)) return this

    events = events.split(eventSplitter)

    for (i = 1, len = arguments.length; i < len; i++) {
        rest[i - 1] = arguments[i]
    }

    while (event = events.shift()) {
        if (all = cache.all) all = all.slice()
        if (list = cache[event]) list = list.slice()

        if (list) {
            for (i = 0, len = list.length; i < len; i += 2) {
                list[i].apply(list[i + 1] || this, rest)
            }
        }

        if (all) {
            args = [event].concat(rest)
            for (i = 0, len = all.length; i < len; i += 2) {
                all[i].apply(all[i + 1] || this, args)
            }
        }
    }

    return this
}

Events.mixTo = function(receiver) {
    receiver = receiver.prototype || receiver
    var proto = Events.prototype

    for (var p in proto) {
        if (proto.hasOwnProperty(p)) {
            receiver[p] = proto[p]
        }
    }
}

// Speech instance ========================================================

function EnbdSpeechEngine (options) {

    // default options
    this.options = {
        debugging: false,
        continuous: false,
        interimResults: false,
        autoRestart: false
    }

    // merge user options
    if (Object.prototype.toString.call(options) === '[object Object]') {
        for (var op in options) {
            this.options[op] = options[op]
        }
    }

    this.active         = false
    this.manualStopped  = false
    this.history        = []
    this.lastIndex      = -1
    this.lastResult     = ''
    this.recognition    = new webkitSpeechRecognition()
	this.currentIndex = -1

    var rec = this.recognition,
        self = this;
	 
  
  
    rec.continuous = self.options.continuous
    rec.interimResults = self.options.interimResults
    if (options.lang) rec.lang = options.lang

    rec.onstart = function () {
        self.active = true
        this.manualStopped = false
        self.emit('start')
    }

    rec.onresult = function (e) {
        if (!e.results || !e.results.length) return

        var updatedResult = e.results[e.resultIndex],
            transcript = updatedResult[0].transcript.replace(/^\s*/, '')

        // new sentence?
        if (e.resultIndex !== self.lastIndex) {
            self.lastIndex = e.resultIndex
            self.lastResult = ''
        }

        // avoid some redundancy
        if (transcript === self.lastResult && !updatedResult.isFinal) return
        if (transcript.length < self.lastResult.length) return

        self.lastResult = transcript

        if (updatedResult.isFinal) {
            // final sentence! we can do work!
            self.history.push(transcript)
            self.emit('finalResult', transcript)
        } else {
            // interim, let's update stuff on screen
            self.emit('interimResult', transcript)
        }
        
        if (self.options.debugging) {
            console.log(transcript + (updatedResult.isFinal ? ' (final)' : ''))
        }
    }

    rec.onerror = function (e) {
        self.emit('error', e)
    }

    rec.onend = function () {
        self.active = false
        self.history    = []
        self.lastIndex  = -1
        self.lastResult = ''
        self.emit('end')
        if (self.options.autoRestart && !self.manualStopped) {
            self.start()
        }
    }
  
 
	
}






  


//EnbdSpeechEngine.prototype.Router = Router();
EnbdSpeechEngine.prototype.TextToVoice = function (message) {
	/*	
	//this.SpeechSynthesis.text = message;	
	//window.speechSynthesis.speak(SpeechSynthesis); 	
	SpeechSynthesis.text = message;
	SpeechSynthesis.volume = 1;
	SpeechSynthesis.rate = 1;
	SpeechSynthesis.pitch = 1;
	window.speechSynthesis.speak(SpeechSynthesis);  
	SpeechSynthesis.onend = function(event) {
	console.log('Utterance has finished being spoken after ' + event.elapsedTime + ' milliseconds.');	
	}
	*/
}

Events.mixTo(EnbdSpeechEngine)

return EnbdSpeechEngine

})()






function navigateAnimate(){
	$('.speech').removeClass('animate-flicker');
	$('.speech').eq(currentIndex).addClass('animate-flicker');	
}	

function navigateRemoveAnimate(){
		  $('.speech').removeClass('animate-flicker');	
}	


EnbdSpeechEngine.prototype.start = function () {
    if (this.active) return
    this.recognition.start()
}

EnbdSpeechEngine.prototype.stop = function () {
    if (!this.active) return
    this.manualStopped = true
    this.recognition.stop()
}


 var enbdSpeechEngine = new EnbdSpeechEngine({
     // lang: 'cmn-Hans-CN', // Mandarin Chinese, default is English.
    // all boolean options default to false
    debugging: true, // will console.log all results
    continuous: true, // will not stop after one sentence
    interimResults: true, // trigger events on iterim results
    autoRestart: true, // recommended when using continuous:true
                      // because the API sometimes stops itself
                      // possibly due to network error.
});



function getQuestion(){

	if($('.speech').eq(currentIndex).attr("speech-type") == "checkbox"){
			
			
			if($('.speech').eq(currentIndex).prop('checked'))			
			{
				return "";
			}else{
				return $('.speech').eq(currentIndex).attr("speech-question");
				
			}
			
	}else{
		if($('.speech').eq(currentIndex).val() !=""){
			return "Existing text is "+ $('.speech').eq(currentIndex).val()+". Please speak to update.";
		}
			return $('.speech').eq(currentIndex).attr("speech-question");
	}
}

function speackQuestion(){
	var question = getQuestion();
	TextToVoice(question);
}



function speechEvent(){ 
if(VoiceSearchDisabled){
	return false;
}
			micAnimate();
		 if(recognizing){
			recognition_stop();
		 }else{
			recognition_start();
			
		 }
}


$( ".speech" ).each(function( i ) {
	console.log("--------++++++-------");
	speech_keys[i]=$('.speech').eq(i).attr("speech-key");
	//speech_keys[$('.speech').eq(i).attr("speech-key")] =  i;	
	//console.log(""+$('.speech').eq(i).attr("speech-key")+"========"+speech_keys[$('.speech').eq(i).attr("speech-key")]);
	console.log("i="+i+", "+speech_keys[i]);
});

$(".speech").click(function(){  

if(VoiceSearchDisabled){
	return false;
}

	oldIndex = currentIndex;
	currentIndex = $(".speech").index(this);  
	oldIndexProcess();
	currentIndexProcess();
  
  navigateAnimate();
  //final_transcript=$('.speech').eq(currentIndex).val();
  //final_transcript = "";
  recognition_start();
  //enbdSpeechEngine.start();
  speackQuestion();
  //$("#icon-mic").addClass("active");
  //speechEvent();  
	oldIndexProcess();
	currentIndexProcess();
});

function navigateUp(){
	currentIndex--;
	speackQuestion();
	var numItems = $('.speech').length;	
	if(currentIndex < 0){
		currentIndex = 0;
	}
	
}


function navigateBottom(){
		currentIndex++;
		speackQuestion();
	var numItems = $('.speech').length;	
	if(currentIndex >= numItems){
		currentIndex = numItems-1;
	}
	
}

function navigate(){
	speackQuestion();
}





function resultProcess(msg, finalResult, spaceChar){
var tempMsg = "";

						if($('.speech').eq(currentIndex).attr("speech-format") == "number"){								
							
							if(msg==""){
								return;
							}
									if(!isNaN(msg)){	
										if(finalResult){
											console.log("final_msg"+msg);										
												if(isNaN(final_transcript)){
													final_transcript = 0;												
												}
											final_transcript += msg;
											final_transcript= final_transcript.split(' ').join('');											
											console.log("number....."+final_transcript);																					
											$('.speech').eq(currentIndex).val(parseInt(final_transcript));
											console.log("alerted set");
										}
									}
							
							}else{	
							
									if($('.speech').eq(currentIndex).attr("speech-type") == "email"){																	
										if(finalResult){											
											final_transcript += msg;
											tempMsg = final_transcript;
										}else{											
											tempMsg = msg;
											tempMsg = final_transcript+tempMsg;										
										}	
										tempMsg= tempMsg.split(' ').join('');
										tempMsg = tempMsg.replace("dot", ".");
										tempMsg = tempMsg.replace("Dot", ".");
										
										$('.speech').eq(currentIndex).val(tempMsg);
										
										
									}else if($('.speech').eq(currentIndex).attr("speech-type") == "checkbox"){	
									
												console.log("checkbox_Event: "+checkbox_Event);
												if(checkbox_Event){
													console.log("checked");
													$('.speech').eq(currentIndex).prop( "checked", true );									
												}else if(checkbox_Event == false){
													console.log("unchecked");
													$('.speech').eq(currentIndex).prop( "checked", false );										
												}
											
									}else if($('.speech').eq(currentIndex).attr("speech-type") == "select"){				
									
												if(!finalResult){	
													return false;
												}
												if(msg==""){	
													return false;
												}
												//alert(1);
												
												console.log("This is select box:");																							
												var select = $('.speech').eq(currentIndex).find('option');
												//console.log("select"+$('.speech').eq(currentIndex).find('option').length);
												
												var msg_ = $.trim(msg.toLowerCase());
												var selec_ = $.trim(msg.toLowerCase());
												
												for(var i = 0;i<select.length;i++){
													//console.log(select[i].value);
													
													if(select[i].value.toLowerCase().includes(msg_)){
														/*var se=$('.speech').eq(currentIndex);
														se.show();
														se[0].size=1;
														*/
														select[i].selected = true;
														//select.children().eq(i).attr("selected", "selected");
														//select[i].prop('selected', true);
														//console.log("select[i]"+select.children().eq(i).attr("selected", "selected"));
														break;														
													}										
												}
												
												
												

												
																								
/*$select.children().filter(function(){
    return this.text == "Plan for the future";
}).prop('selected', true);
*/




												
												//var ele = $('.speech').eq(currentIndex);
												//var length = $('#'+ele+' option').length;
												
												//var length = $('.speech').eq(currentIndex).length;
												//alert(length);
												
												//var se=$('.speech').eq(currentIndex);
												  //se.show();
												  //se[0].size=10;
    
													//var se=$('.speech').eq(currentIndex);
													//se.hide();
  
  
  
											
									}else{								
																				
										if(finalResult){											
											final_transcript += spaceChar+msg;
											tempMsg = final_transcript;
											final_transcript_bkp = final_transcript;
										}else{											
											tempMsg = msg;
											tempMsg = final_transcript +spaceChar+ tempMsg;										
										}			

										
										$('.speech').eq(currentIndex).val(tempMsg);
										
										
									}
									
							}
							
							
}


function interimResultEvent(msg){
		var spaceChar = " ";
		resultProcess(msg, false, spaceChar);	

}

function finalResultEvent(msg){
		var spaceChar = " ";
		resultProcess(msg, true, spaceChar);												
}

function EventController(){

navigateAnimate();
navigate();
//var question = getQuestion();
//alert(question);
//TextToVoice(question);
currentIndexProcess();

}	


// simply listen to events
// chainable API
enbdSpeechEngine
    .on('start', function () {
		//$("#laName").val("");
        console.log('started')
		recognizing =  true;
		EventController();
    })
    .on('end', function () {
        console.log('ended')
		recognizing = false;
    })
    .on('error', function (event) {
        console.log(event.error)
    })
    .on('interimResult', function (msg) {
        //document.body.innerHTML = msg
        //$('.search-input').val(msg);
		//$("#laName").val(msg);
        console.log("interim:"+msg);
		//TextToVoice(msg);
		interimResultEvent(msg);
    })
    .on('finalResult', function (msg) {
        //document.body.innerHTML = msg        
        console.log(msg + " Done");
        //enbdSpeechEngine.stop();    
		//TextToVoice(msg);		
		//$("#laName").val(msg);
		if(Router(msg)){finalResultEvent(msg);}			
    })   

	




	
	//enbdSpeechEngine.start();
	//enbdSpeechEngine.Router();
	
function recognition_start(){
	RecognizingMode =  true;
	$("#icon-mic").addClass("active");
			//oldIndexProcess();
			//currentIndexProcess();
	if(!recognizing){
		enbdSpeechEngine.start();
	}
}	
	
function recognition_stop(){
	$("#icon-mic").removeClass("active");
	navigateRemoveAnimate();
	enbdSpeechEngine.stop();
}	
	

function micAnimate(){
		  if($("#icon-mic").hasClass("active")){  
		  $("#icon-mic").removeClass("active");
		  }else{
		  $("#icon-mic").addClass("active");
		  }
}	

function currentIndexProcess(){

if($('.speech').eq(currentIndex).attr("speech-type") == "select"){

					var se=$('.speech').eq(currentIndex);
					se.show();
					se[0].size=$('.speech').eq(currentIndex).find('option').length;

					//var se=$('.speech').eq(currentIndex);
					//se.hide();
}  

}

function oldIndexProcess(){

if($('.speech').eq(oldIndex).attr("speech-type") == "select"){
					//var se=$('.speech').eq(oldIndex);
					//se.hide();
					
					var se=$('.speech').eq(oldIndex);
					se.show();
					se[0].size=1;
}  

}

	
function Router(msg){
	oldIndex = currentIndex;	
	var msg_ = $.trim(msg.toLowerCase());
	console.log("msg: "+msg_);	
	fieldIsNotCleared = true;
	
	if(msg_.includes("previous")){
			resultProcess("", true, "" );
			navigateUp();
			navigateAnimate();
			console.log("prv");			
			final_transcript=$('.speech').eq(currentIndex).val();
			fieldIsNotCleared=false;
			oldIndexProcess();
			currentIndexProcess();
		return false;
		
	}else if(msg_.includes("next")){
			resultProcess("", true, "");
			console.log("next called"+msg_);
			navigateBottom();
			navigateAnimate();						
			final_transcript=$('.speech').eq(currentIndex).val();
			fieldIsNotCleared=false;
			oldIndexProcess();
			currentIndexProcess();
			return false;
	}else if(msg_.includes("clear") || msg_.includes("delete") || msg_.includes("remove")){	
			$('.speech').eq(currentIndex).val("");		
			final_transcript="";		
			fieldIsNotCleared = false;
			return false;
	}else if(msg_.includes("uncheck")){
		checkbox_Event = false;
	}else if(msg_.includes("check")){		
		checkbox_Event = true;
		fieldIsNotCleared = false;
		
	}else if(msg_.includes("submit") || msg_.includes("apply") || msg_.includes("finish")){
			alert("Form is submittin.....");	
		
	}else{	
	
	
				if(msg_.includes("goto") ||  msg_.includes("go to")){
				var i;
				for (i = 0; i < speech_keys.length; ++i) {			
					//if(speech_keys[i] == msg_){
					if(msg_.includes(speech_keys[i].toLowerCase())){
							resultProcess("", true, "");
							//alert(12121212);
							//alert("================="+speech_keys[i]);
							currentIndex = i;
							final_transcript=$('.speech').eq(currentIndex).val();
							navigateAnimate();
							speackQuestion();
							oldIndexProcess();
							currentIndexProcess();
							return false;
					}
				}
				}
				
		
	}
		return true;
	
	
	
}

$(document).ready(function(){

if(VoiceSearchDisabled){
	$("#icon-mic").hide();
}


$("#icon-mic").click(function(){
		speechEvent();    
});
  
  

});



	
	
	
</script>
